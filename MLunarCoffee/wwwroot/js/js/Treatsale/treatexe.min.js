function Met_EventRow(n){$("#Met_warebody #row_"+n+" .ui.dropdown").dropdown({allowCategorySelection:!0,forceSelection:!1,transition:"fade up"});$("#row_"+n+" .numberExport").unbind("change").change(function(){let n=this.id.replace("numberExport_","");data_product[n].number=Number(this.value).toFixed(2);Met_CountTotal(n)});$("#row_"+n+" .metpackageNumber").unbind("change").change(function(){let t=this.id.replace("met_packageNumber_",""),n=this.value.trim();data_product[t].package=n==""?"":n});$("#row_"+n+" .productExport").unbind("change").change(function(){let n=this.id,t=n.replace("productExport_",""),i=Number($("#"+n).dropdown("get value"))?Number($("#"+n).dropdown("get value")):0;data_product[t].productID=i;Met_Fillunit(i,t);IsPackageNumber==1&&Met_Fillpackage(i,t)});$("#row_"+n+" .unitProduct").unbind("change").change(function(){let n=this.id,t=n.replace("unitProduct_","");data_product[t].unitID=Number($("#"+n).dropdown("get value"))?Number($("#"+n).dropdown("get value")):0;Met_CountTotal(t)});$("#Met_warebody #row_"+n+" .buttonDeleteClass").on("click",function(n){let t=$(this).attr("data-id");delete data_product[t];$("#row_"+t).remove();n.stopPropagation()})}function Met_Fillunit(n,t){$("#unitProduct_"+t).dropdown("clear");$("#unitProduct_"+t).dropdown("refresh");let i=[],r=DataProduct.filter(t=>t.ID==n);if(r&&r.length>0){i.push({ID:r[0].UnitID,Name:r[0].UnitName});let u=DataUnitProduct.filter(t=>t.ProductID==n);if(u!=undefined&&u.length>0)for(let n=0;n<u.length;n++)i.push({ID:u[n].UnitChange,Name:u[n].UnitChangeName});Load_Combo(i,"cbbunitProduct_"+t,!0);$("#unitProduct_"+t).dropdown("clear");$("#unitProduct_"+t).dropdown("refresh");$("#unitProduct_"+t).dropdown("set selected",Number(i[0].ID))}}async function Met_FillData(n,t){return new Promise(i=>{let r=DataProduct;met_extype==2&&(r=r.filter(n=>n.IsMedicine==1));Load_Combo(r,"cbbproductExport_"+n,!0);$("#productExport_"+n).dropdown("refresh");$("#productExport_"+n).dropdown("set selected",t.productID);Number(t.productID)!=0&&(Met_Fillunit(t.productID,n),$("#unitProduct_"+n).dropdown("refresh"),$("#unitProduct_"+n).dropdown("set selected",t.unitID),IsPackageNumber==1&&Met_Fillpackage(t.productID,n));$("#met_packageNumber_"+n).val(t.package);$("#packageNumber_"+n).val(t.package);i()})}function Met_Fillpackage(n,t){AjaxLoad(url="/WareHouse/TreatmentSale/ExportDetail/?handler=LoadPackNum",data={ProductID:n},async=!0,error=null,success=function(n){if(n!="0"){let i=JSON.parse(n);if(i&&i.length!=0)for(let n=0;n<i.length;n++)Met_DataPackage[i[n].ID]=i[n],i[n].Name=i[n].Name;Load_Combo(i,"cbbmet_package_"+t,!0);$("#met_package_"+t).dropdown("clear");$("#met_package_"+t).dropdown("refresh");$("#met_package_"+t).unbind("change").change(function(){let i=this.id,n=i.replace("met_package_",""),t=$(this).dropdown("get value");t!=undefined&&t!=0?($("#met_packageNumber_"+n).val(Met_DataPackage[t].Name),$("#met_packageExpired_"+n).html(ConvertDateTimeUTC_DMY(Met_DataPackage[t].DateExpired)),data_product[n].package=Met_DataPackage[t].Name):($("#met_packageNumber_"+n).val(""),$("#met_packageExpired_"+n).html(""),data_product[n].package="")})}},sender=null,before=function(){$("#Met_packwait_"+t).show()},complete=function(){$("#Met_packwait_"+t).hide()},nolimit=1)}function Met_Renproduct(n){return`<div class="ui fluid search selection dropdown productExport form-control" id="productExport_${n}">
                <input type="hidden" />
                <input class="search" autocomplete="off" tabindex="0" />
                <div class="default text">eg .${Outlang.San_pham}</div>
                <div id="cbbproductExport_${n}" class="menu" tabindex="-1">
                </div>
            </div>`}function Met_Rennumber(n,t){return`<input name="numberFloat" class="ps-2 numberExport form-control"
                id="numberExport_${n}" value="${t}" placeholder="eg .${Outlang.So_luong}" />`}function Met_Renunit(n){return`<div class="ui fluid search selection dropdown unitProduct form-control w-auto" id="unitProduct_${n}">
                <input type="hidden" />
                <input class="search" autocomplete="off" tabindex="0" /><div class="default text">eg .${Outlang.Don_vi}</div>
                <div id="cbbunitProduct_${n}" class="menu" tabindex="-1">
                </div>
            </div>`}function Met_Renpackage(n){if(IsPackageNumber==0)return"";return`

                        <div class="ui fluid search selection dropdown packageNumber form-control w-auto" id="met_package_${n}">
                            <input type="hidden" />
                            <input class="search" autocomplete="off" tabindex="0" />
                            <div class="default text">eg .${Outlang.So_lo}</div>
                            <div id="cbbmet_package_${n}" class="menu" tabindex="-1">
                            </div>
                        </div>
                        <input class="ps-2 form-control metpackageNumber" id="met_packageNumber_${n}"  />
                        <span id="met_packageExpired_${n}" class="input-group-text"></span>

                    `}