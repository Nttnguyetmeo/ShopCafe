function Patiend_Record_ShowAll_Service(){let n=$("#Show_Service_All_Record").attr("data-type");n=="noview"?(Patient_Record_Prepare_Functioning(),Tab_List_Customer_Service_Execute(0,0)):(Patient_Record_Done_Functioning(),Tab_List_Customer_Service())}function Patient_Record_Add(){$("#Div_Tab_List_Service_Master").hide();$("#Div_Tab_Service_Detail").show();$("#Div_Tab_Service_Detail").empty();$("#Div_Tab_Service_Detail").load("/Customer/PatientRecord/PatientRecordDetail?CustomerID="+ser_MainCustomerID+"&Type=1&ver="+versionofWebApplication)}function Patient_Record_Print(){ser_current_patient_record!=0&&PrintTemplate(ser_current_patient_record,ser_MainBranchID,24,versionofWebApplication,ser_MainCustomerID)}function Patient_Record_Delete(){const n=notiConfirm();n.then(function(){Execute_Patient_Record_Delete(ser_current_patient_record)},function(){})}function Execute_Patient_Record_Delete(n){AjaxLoad(url="/Customer/Service/TabList/TabList_Service/?handler=DeleteItemPatientRecord",data={id:n},async=!0,error=function(){notiError_SW()},success=function(n){if(n=="1"){notiSuccess();delete ser_current_data_patient_record[ser_current_patient_record];let n=Object.keys(ser_current_data_patient_record).length;if(n==0)ser_current_patient_record=0;else{let n=0;for([key,value]of Object.entries(ser_current_data_patient_record))n==0&&(n=key);ser_current_patient_record=n;Tab_List_Customer_Patient_Record_Trigger(n);let t="patient_record_"+n;$("#"+t).length&&$("#"+t).remove()}}else notiError_SW()})}function Tab_List_Customer_Patient_Record_Trigger(n){let t=Object.keys(ser_current_data_patient_record).length;if(t!=0&&ser_current_data_patient_record[n]!=undefined){let t="patient_record_"+n;$("#"+t).length&&$("#"+t).trigger("click")}}function Tab_List_Customer_Patient_Record_Event(){$(".patient_record_item").on("click",function(n){let t=document.getElementsByClassName("patient_record_item"),i=Number($(this).attr("data-id")),r=Number($(this).attr("data-lock")),u="imgExecute_PatientRecord_"+i;for($(".imgExecute_PatientRecord").hide(),$("#"+u).show(),_i=0;_i<t.length;_i++)Number(t[_i].dataset.id)==Number(i)?t[_i].className.includes("recordselected")||(t[_i].className=t[_i].className+" recordselected"):t[_i].className="patient_record_item";ser_current_patient_record=Number(i);ser_current_patient_record_lock=Number(r);ser_current_treatment_plant_id=0;ser_current_treatment_plant_data=[];Number(ser_sys_Treatment_Plan)==1&&ser_current_patient_record_lock==0&&$("#buttonadd_treatment_plain").length?$("#buttonadd_treatment_plain").show():$("#buttonadd_treatment_plain").length&&$("#buttonadd_treatment_plain").hide();Tab_List_Customer_Service();n.stopPropagation()});$(".patient_record_detail").on("click",function(){ser_current_patient_record!=0&&($("#Div_Tab_List_Service_Master").hide(),$("#Div_Tab_Service_Detail").show(),$("#Div_Tab_Service_Detail").empty(),$("#Div_Tab_Service_Detail").load("/Customer/PatientRecord/PatientRecordDetail?CustomerID="+ser_MainCustomerID+"&PatientRecordID="+ser_current_patient_record+"&ver="+versionofWebApplication))});$(".imgExecute_PatientRecord").click(function(n){let t=$(this).closest(".patient_record_item").position().left;$("#popupExecute_PatientRecord").css({left:t+90});$("#popupExecute_PatientRecord").css({top:17});$("#popupExecute_PatientRecord").show();$("#popupExecute_PatientRecord").dropdown("clear");n.stopPropagation()})}function Render_Tab_List_Patient_Record(n,t){var i=document.getElementById(t);if(i!=null){i.innerHTML="";let r="";for([key,value]of Object.entries(n)){let n=Render_Tab_List_Patient_Record_Each(key,value);r=n+r}document.getElementById(t).innerHTML=r}Tab_List_Customer_Patient_Record_Event()}function Render_Tab_List_Patient_Record_Add(n,t,i){let r=Render_Tab_List_Patient_Record_Each(n,t);document.getElementById(i).innerHTML=r+document.getElementById(i).innerHTML;Tab_List_Customer_Patient_Record_Event()}function Render_Tab_List_Patient_Record_Each(n,t){let i=t,r=i.Image!=""?i.Image:Master_Default_Pic;return'<div class="text-center px-3 position-relative"><a id="patient_record_'+n+'" data-lock="'+i.IsClose+'" data-id="'+n+'" class="patient_record_item"><img alt="'+Outlang.Hinh_anh_benh_nhan+'" class="avatar avatar-lg  avatar-sm border border-secondary" onerror="'+Master_OnLoad_Error_Image(this)+'" src="'+r+'"  /><span class="patient_record_detail mt-2 cursor-pointer text-primary mb-0  text-sm ">'+i.TeamplateName+'<\/span><span class="patientrename cursor-pointer mt-2 text-dark mb-0  text-sm ">'+i.TeamplateName+"<\/span><\/a><\/div>"}