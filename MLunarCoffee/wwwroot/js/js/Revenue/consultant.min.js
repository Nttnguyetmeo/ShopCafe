function Revenue_Executing_Method(n,t){let u=n.Table;dataDetail_manual=n.Table1;let r=u;for(Number(t)!=0&&(r=r.filter(n=>n.BranchID==Number(t)),dataDetail_manual=dataDetail_manual.filter(n=>n.BranchID==Number(t))),i=0;i<r.length;i++)r[i].NumPerson=(r[i].EMP1!=0?1:0)+(r[i].EMP2!=0?1:0)+(r[i].EMP3!=0?1:0)+(r[i].EMP4!=0?1:0),r[i].RealAmount1=Detail_Executing_GetRevenue(r[i].NumPerson,r[i].Permision_Percent_Serivice,r[i].Permision_Amount_Serivice,r[i].Permision_Percent,r[i].Permision_Amount,r[i].Price,r[i].Quantity,r[i].TotalPay,1),r[i].RealAmount2=Detail_Executing_GetRevenue(r[i].NumPerson,r[i].Permision_Percent_Serivice,r[i].Permision_Amount_Serivice,r[i].Permision_Percent,r[i].Permision_Amount,r[i].Price,r[i].Quantity,r[i].TotalPay,0),r[i].RealAmount3=Detail_Executing_GetRevenue(r[i].NumPerson,r[i].Permision_Percent_Serivice,r[i].Permision_Amount_Serivice,r[i].Permision_Percent,r[i].Permision_Amount,r[i].Price,r[i].Quantity,r[i].TotalPay,0),r[i].RealAmount4=Detail_Executing_GetRevenue(r[i].NumPerson,r[i].Permision_Percent_Serivice,r[i].Permision_Amount_Serivice,r[i].Permision_Percent,r[i].Permision_Amount,r[i].Price,r[i].Quantity,r[i].TotalPay,0);dataDetail=r;RenderReportMaster(report_EmployeeData,"dtContentReportMasterBody");$(".masterRow")[0]&&$(".masterRow")[0].click()}function Detail_Executing_GetRevenue(n,t,i,r,u,f,e,o,s){let l=0,a=0,h=0,c=0,v=0;return s==1&&r+u>0?(a=r,h=u,c=1):s==0&&r+u>0?c=-1:(a=t,h=i,c=0),c==-1?l=0:(v=h!=0?o/f*h*e:o/f*f*a/100,l=Detail_GetRevenue_ByType(n,v,s)),l}function Detail_GetRevenue_ByType(n,t,i){return report_way_to_count==1?n==0?0:t/n:report_way_to_count==2?i==1?t:0:t}function RenderReportMaster_TimeJoin(n){let t=0;for(_i=0;_i<dataDetail.length;_i++)(dataDetail[_i].EMP1==n||dataDetail[_i].EMP2==n||dataDetail[_i].EMP3==n||dataDetail[_i].EMP4==n)&&(t=t+1);for(_i=0;_i<dataDetail_manual.length;_i++)(dataDetail_manual[_i].EMP1==n||dataDetail_manual[_i].EMP2==n||dataDetail_manual[_i].EMP3==n)&&(t=t+1);return t}function RenderReportMaster_Amount(n){let t=0;for(_i=0;_i<dataDetail.length;_i++)dataDetail[_i].EMP1==n&&(t=t+dataDetail[_i].RealAmount1),dataDetail[_i].EMP2==n&&(t=t+dataDetail[_i].RealAmount2),dataDetail[_i].EMP3==n&&(t=t+dataDetail[_i].RealAmount3),dataDetail[_i].EMP4==n&&(t=t+dataDetail[_i].RealAmount4);for(_i=0;_i<dataDetail_manual.length;_i++)dataDetail_manual[_i].EMP1==n&&(t=t+dataDetail_manual[_i].RealAmount1),dataDetail_manual[_i].EMP2==n&&(t=t+dataDetail_manual[_i].RealAmount2),dataDetail_manual[_i].EMP3==n&&(t=t+dataDetail_manual[_i].RealAmount3);return t}function RenderReportMaster(n,t){var r=document.getElementById(t),i;if(r!=null){r.innerHTML="";let u="",f=0;if(n&&n.length>0)for(i=0;i<n.length;i++){let t=n[i],e=RenderReportMaster_TimeJoin(t.ID),r=RenderReportMaster_Amount(t.ID);if(e!=0){f=f+r;let n=Fun_GetObject_ByID(DataEmployee,t.ID),i='<td class="d-none">'+t.ID+'<\/td><td class="d-none">'+t.Name+'<\/td><td class="vt-number-order"><\/td><td><div class="d-flex"><div class="icon icon-shape icon-sm me-2 text-center"><img class="avatar avatar-xs mt-2" src="'+n.Avatar+'" alt="label-image"><\/div><div class="d-flex flex-column"><h6 class="text-dark text-sm mb-0">'+t.Name+'<\/h6><span class="text-xs">'+formatNumber(Math.ceil(r))+"<\/span> <\/div><\/div><\/td>";u=u+'<tr class="vt-number masterRow" data-items="'+e+'" data-amount="'+r+'" data-name="'+t.Name+'" data-id="'+t.ID+'">'+i+"<\/tr>"}}Count_Up("lbTotalAmount",f);document.getElementById(t).innerHTML=u;EventrowClick()}}function ViewDetail(n,t,i){var r=dataDetail.filter(t=>t.EMP1==n||t.EMP2==n||t.EMP3==n||t.EMP4==n);let u=dataDetail_manual.filter(t=>t.EMP1==n||t.EMP2==n||t.EMP3==n);r!=undefined&&u!=undefined&&(Count_Up("lbTotalAmount_Detail",i),Count_Up("lbTotalTimes_Detail",t),RenderReportDetail(r,u,"dtContentReportBody",n))}function RenderReportDetail(n,t,i,r){var f=document.getElementById(i),u;if(f!=null){f.innerHTML="";let e="",o=0;if(n&&n.length>0)for(u=0;u<n.length;u++){o=u;let t=n[u],i='<td class="vt-number-order"><\/td><td><a target="_blank" href="/Customer/MainCustomer?CustomerID='+t.CustID+"&ver="+versionofWebApplication+'">'+t.CustCode+"<\/a><\/td><td>"+t.CustName+"<\/td><td>"+(Number(t.IsCard)==1?RenderReport_Detail_Get_CardName(t.ServiceID):RenderReport_Detail_Get_ServiceName(t.ServiceID))+"<\/td><td>"+(t.IsProduct==1?"X":"")+'<\/td><td><span class="money_row">'+formatNumber(Math.ceil((t.EMP1!=r?0:t.RealAmount1)+(t.EMP2!=r?0:t.RealAmount2)+(t.EMP3!=r?0:t.RealAmount3)+(t.EMP4!=r?0:t.RealAmount4)))+"<\/td><td>"+(Number(t.IsManual)==1?ConvertDateTimeUTC_DMY(t.Created):"")+"<\/td>";e=e+'<tr class="vt-number" role="row">'+i+"<\/tr>"}if(t&&t.length>0)for(let n=0;n<t.length;n++){let i=t[n],u='<td class="vt-number-order"><\/td><td><a target="_blank" href="/Customer/MainCustomer?CustomerID='+i.CustID+"&ver="+versionofWebApplication+'">'+i.CustCode+"<\/a><\/td><td>"+i.CustName+"<\/td><td>"+(Number(i.IsCard)==1?RenderReport_Detail_Get_CardName(i.ServiceID):RenderReport_Detail_Get_ServiceName(i.ServiceID))+'<\/td><td style="text-align:center;">'+(i.IsProduct==1?"X":"")+'<\/td><td><span class="money_row">'+formatNumber(Math.ceil((i.EMP1!=r?0:i.RealAmount1)+(i.EMP2!=r?0:i.RealAmount2)+(i.EMP3!=r?0:i.RealAmount3)))+"<\/td><td>"+ConvertDateTimeUTC_DMY(i.Created)+"<\/td>";e=e+(Number(i.Before_Revenue)==0?'<tr class="vt-number" role="row">':'<tr role="row" class="vt-number outrangerow">')+u+"<\/tr>"}document.getElementById(i).innerHTML=e}}function RenderReport_Detail_Get_ServiceName(n){try{return report_ServiceData[n]}catch(t){return""}}function RenderReport_Detail_Get_CardName(n){try{return report_CardData[n]}catch(t){return""}}