/*!
 * Timeslider v0.9.8
 * Copyright 2016 Valery Vishnevskiy
 * https://github.com/v-v-vishnevskiy/timeslider
 * https://github.com/v-v-vishnevskiy/timeslider/blob/master/LICENSE
 */
if(typeof jQuery=="undefined")throw new Error("Timeslider's JavaScript requires jQuery");(function(n){"use strict";var t=n.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<6||t[0]==1&&t[1]==6&&t[2]<1)throw new Error("Timeslider's JavaScript requires jQuery version 1.6.1 or higher");})(jQuery),function(n){function r(i,r){return this.each(function(){var f=n(this),u=f.data("timeslider");if(u)if(typeof i=="string")switch(i){case"add":u.add_timecell(r);break;case"toggle":u.toggle_timecell(r);break;case"edit":u.edit_timecell(r);break;case"remove":u.remove_timecell(r);break;case"remove_all":u.remove_all_timecells();break;case"new_start_timestamp":u.set_new_start_timestamp(r)}else u.set_options(i);else f.data("timeslider",new t(f,i))})}var t=function(n,t){return this.$element=null,this.$ruler=null,this.$prompts=null,this.options=null,this.init_timestamp=new Date,this.frozen_current_timestamp=0,this.px_per_ms=1,this.is_mouse_down_left=!1,this.clicked_on=null,this.prev_cursor_x=0,this.time_cell_selected=null,this.running_time_cell=null,this.time_caret=null,this.steps_by_minutes=[1,2,5,10,15,20,30,60,120,180,240,360,720,1440],this.gt_height=0,this.init(n,t),this},i;t.VERSION="0.9.8";t.DEFAULTS={start_timestamp:(new Date).getTime()+(new Date).getTimezoneOffset()*-6e4,current_timestamp:(new Date).getTime()+(new Date).getTimezoneOffset()*-6e4,hours_per_ruler:24,graduation_step:20,distance_between_gtitle:80,update_timestamp_interval:1e3,update_interval:1e3,show_ms:!1,init_cells:null,ruler_enable_move:!0,timecell_enable_move:!0,timecell_enable_resize:!0,on_add_timecell_callback:null,on_toggle_timecell_callback:null,on_remove_timecell_callback:null,on_remove_all_timecells_callback:null,on_dblclick_timecell_callback:null,on_move_timecell_callback:null,on_resize_timecell_callback:null,on_change_timecell_callback:null,on_dblclick_ruler_callback:null,on_move_ruler_callback:null,on_change_ruler_callback:null};t.prototype.init=function(t,i){this.$element=n(t);this.$element.append('<div class="graduation-title" style="display:none">init<\/div>');this.gt_height=this.$element.find(".graduation-title").height();this.$element.find(".graduation-title").remove();this.$element.append('<div class="ruler" style="height:'+(this.$element.height()+this.gt_height)+'px;"><\/div><div class="prompts" style="top:-'+(this.$element.height()*2+this.gt_height+100)+'px;"><\/div>');this.$element.height(this.$element.height()+this.gt_height);this.$ruler=this.$element.find(".ruler");this.$prompts=this.$element.find(".prompts");this.$element.attr("start_timestamp")&&(i.start_timestamp=parseInt(this.$element.attr("start_timestamp")));this.$element.attr("current_timestamp")&&(this.frozen_current_timestamp=i.current_timestamp=parseInt(this.$element.attr("current_timestamp")));this.options=this.get_options(i);this.px_per_ms=this.$element.width()/(this.options.hours_per_ruler*36e5);this.$ruler.append('<div class="bg"><\/div><div class="bg-event'+(this.options.ruler_enable_move?"":"disable-move")+'"><\/div>');this.add_time_caret();this.add_graduations();this.options.init_cells&&(typeof this.options.init_cells=="function"?this.options.init_cells.bind(this).call():this.add_cells(this.options.init_cells));this.add_events()};t.prototype.get_defaults=function(){return t.DEFAULTS};t.prototype.time_duration=function(n){var r=Math.floor(n/36e5),i=Math.floor((n-r*36e5)/6e4),t=Math.floor((n-r*36e5-i*6e4)/1e3),u=n-r*36e5-i*6e4-t*1e3;return(u=this.options.show_ms?"."+("00"+u.toString()).substr(-3):"",r)?(r=r.toString(),i=i.toString(),i=i.length>1?i:"0"+i,t=t.toString(),t=t.length>1?t:"0"+t,r+":"+i+":"+t+u):i?(i=i.toString(),t=t.toString(),t=t.length>1?t:"0"+t+u,i+":"+t):t.toString()+u};t.prototype.get_options=function(t){return t=n.extend({},this.get_defaults(),t),this.validate_options(t)};t.prototype.validate_options=function(n){return n.hours_per_ruler<1?n.hours_per_ruler=1:n.hours_per_ruler>48&&(n.hours_per_ruler=48),n.update_timestamp_interval<1&&(n.update_timestamp_interval=1),n.update_interval<n.update_timestamp_interval&&(n.update_interval=n.update_timestamp_interval),n.start_timestamp&&n.start_timestamp>=0&&(n.start_timestamp=n.start_timestamp),n.current_timestamp&&n.current_timestamp>=0&&(this.frozen_current_timestamp=n.current_timestamp=n.current_timestamp),n.graduation_step>this.$ruler.width()?n.graduation_step=this.$ruler.width():n.graduation_step<5&&(n.graduation_step=5),n};t.prototype.set_options=function(t){t.hours_per_ruler&&(t=n.extend({},this.options,t),t.hours_per_ruler!=this.options.hours_per_ruler&&(this.options.hours_per_ruler=t.hours_per_ruler,this.px_per_ms=this.$ruler.width()/(this.options.hours_per_ruler*36e5),this.remove_graduations(),this.add_graduations(),this.set_time_caret_position(),this.set_time_cells_position()))};t.prototype.timestamp_to_date=function(n){var t=new Date(n);return("0"+t.getUTCDate().toString()).substr(-2)+"."+("0"+(t.getUTCMonth()+1).toString()).substr(-2)+"."+t.getUTCFullYear()+" "+("0"+t.getUTCHours().toString()).substr(-2)+":"+("0"+t.getUTCMinutes().toString()).substr(-2)+":"+("0"+t.getUTCSeconds().toString()).substr(-2)+(this.options.show_ms?"."+("00"+t.getUTCMilliseconds().toString()).substr(-3):"")};t.prototype.graduation_title=function(n){return n.getUTCHours()==0&&n.getUTCMinutes()==0&&n.getUTCMilliseconds()==0?"":n.getUTCHours()+":"+("0"+n.getUTCMinutes().toString()).substr(-2)};t.prototype.ms_to_next_step=function(n,t){var i=n%t;return i?t-i:0};t.prototype.set_style=function(n,t){var r,i;if(n)if(t)t.css(n);else{r="";for(i in n)n.hasOwnProperty(i)&&(r+=i+":"+n[i]+";");return r}return""};t.prototype.add_events=function(){var t=this;window.setInterval(this.set_current_timestamp(),this.options.update_timestamp_interval);window.setInterval(this.set_running_elements(),this.options.update_interval);n("body").mouseup(this.mouse_up_event());n("body").mousemove(this.cursor_moving_event());this.options.ruler_enable_move&&this.$ruler.find(".bg-event").mousedown(this.ruler_mouse_down_event());typeof this.options.on_dblclick_ruler_callback=="function"&&this.$ruler.find(".bg-event").dblclick(function(){t.options.on_dblclick_ruler_callback(t.options.start_timestamp,t.options.current_timestamp)})};t.prototype.add_time_caret=function(){this.$ruler.append('<div class="current-time-caret"><\/div>');this.time_caret=this.$ruler.find(".current-time-caret");this.set_time_caret_position()};t.prototype.add_graduations=function(){for(var e,f=this.$ruler.width()/(this.options.hours_per_ruler*60),r=this.options.graduation_step,t=r/f,n=0;n<this.steps_by_minutes.length;n++)if(t<=this.steps_by_minutes[n]){t=this.steps_by_minutes[n];r=t*f;break}for(e=30,n=0;n<this.steps_by_minutes.length;n++)if(this.options.distance_between_gtitle/f<=this.steps_by_minutes[n]){e=this.steps_by_minutes[n];break}var h=this.ms_to_next_step(this.options.start_timestamp,t*6e4),o=this.options.start_timestamp+h-t*24e4,c=this.$ruler.width()/r,u,i,s;for(n=-4;n<=c;n++)i="",u=new Date(o),s=n*r*1.5+this.px_per_ms*h,u.getUTCHours()==0&&u.getUTCMinutes()==0?i="big":o/6e4%e==0&&(i="middle"),this.$ruler.append('<div id="hour'+n+'" class="graduation '+i+'" style="left: '+s.toString()+'px"><\/div>'),this.$ruler.append('<div id="graduation-title-hour'+n+'" class="graduation-title'+(i?"":" hidden")+'" style="left:'+(s-40).toString()+'px">'+this.graduation_title(u)+"<\/div>"),o+=t*6e4};t.prototype.toggle_timecell=function(n){var i=null,r=null,u=null,t,f,e;if(this.running_time_cell?(t=this.running_time_cell,this.running_time_cell=null,i=t.attr("id"),u=this.options.current_timestamp,n&&n.stop&&(u=n.stop),r=parseInt(t.attr("start_timestamp")),t.attr("stop_timestamp",u),f=(u-r)*this.px_per_ms,e=(r-this.options.start_timestamp)*this.px_per_ms,this.$prompts.append('<div id="r-prompt-'+i+'" class="prompt" style="top:101px;left: '+(e+f-44).toString()+'px;"><div class="triangle-up"><\/div><div class="body"><\/div><\/div>'),t.removeClass("current"),this.$ruler.find("#t"+i).removeClass("current"),this.set_time_duration(t),this.set_style(n.style,t)):(n&&typeof n=="object"||(n={}),n.start||(n.start=this.options.current_timestamp),delete n.stop,n=this.add_cell(n),n&&(i=n._id,r=n.start)),typeof this.options.on_toggle_timecell_callback=="function")this.options.on_toggle_timecell_callback(i,r,u)};t.prototype.add_timecell=function(n){var t=null,i=null,r=null;if(n&&typeof n=="object"&&n.stop&&(n=this.add_cell(n),n&&(t=n._id,i=n.start,r=n.stop)),typeof this.options.on_add_timecell_callback=="function")this.options.on_add_timecell_callback(t,i,r)};t.prototype.edit_timecell=function(n){n._id&&(n.start||n.stop)&&(n.element=this.$ruler.find("#"+n._id),n.element.length&&(n.l_prompt=this.$prompts.find("#l-prompt-"+n._id+".prompt"),n.t_element=this.$ruler.find("#t"+n._id),n.r_prompt=this.$prompts.find("#r-prompt-"+n._id+".prompt"),this._edit_time_cell(n)))};t.prototype.remove_timecell=function(n){var t=this.$ruler.find("#"+n),i=null,r=null;if(t.length?(i=parseInt(t.attr("start_timestamp")),this.running_time_cell&&this.running_time_cell.attr("id")==n?this.running_time_cell=null:r=parseInt(t.attr("stop_timestamp")),t.remove(),this.$ruler.find("#t"+n).remove(),this.$prompts.find("#l-prompt-"+n).remove(),this.$prompts.find("#r-prompt-"+n).remove()):n=null,typeof this.options.on_remove_timecell_callback=="function")this.options.on_remove_timecell_callback(n,i,r)};t.prototype.remove_all_timecells=function(){var i=[],t=this,r=this.$ruler.children(".timecell"),u=n.Deferred();r.each(function(t){i.push({_id:n(this).attr("id"),start:parseInt(n(this).attr("start_timestamp")),stop:n(this).attr("stop_timestamp")?parseInt(n(this).attr("stop_timestamp")):null});t+1==r.length&&u.resolve(i)});n.when(u).then(function(n){if(this.running_time_cell=null,t.$ruler.children(".timecell").remove(),t.$ruler.children(".timecell-event").remove(),t.$prompts.children(".prompt").remove(),typeof t.options.on_remove_all_timecells_callback=="function")t.options.on_remove_all_timecells_callback(n)})};t.prototype.remove_graduations=function(){this.$ruler.find(".graduation").remove();this.$ruler.find(".graduation-title").remove()};t.prototype.add_cell=function(t){var i=this,l,s;if(!t.start)return!1;t._id||(t._id="cell-"+t.start);var h=function(t){var u=parseFloat(n(this).css("width")),r=parseFloat(t.offsetX);return i.options.timecell_enable_move&&i.options.timecell_enable_resize?r<=3?"left":r>3&&r<u-4?"center":"right":i.options.timecell_enable_move?"center":i.options.timecell_enable_resize?r<=3?"left":r>3&&r<u-4?null:"right":null},a=function(t){if(t.which==1){i.clicked_on="timecell";var r=n(this).attr("p_id");switch(h.call(this,t)){case"left":i.time_cell_selected={element:i.$ruler.find("#"+r),l_prompt:i.$prompts.find("#l-prompt-"+r+".prompt"),t_element:n(this),hover:!0};i.is_mouse_down_left=!0;n(this).addClass("moving");break;case"center":n(this).hasClass("current")||(i.time_cell_selected={element:i.$ruler.find("#"+r),l_prompt:i.$prompts.find("#l-prompt-"+r+".prompt"),t_element:n(this),r_prompt:i.$prompts.find("#r-prompt-"+r+".prompt"),hover:!0},i.is_mouse_down_left=!0,n(this).addClass("moving"));break;case"right":n(this).hasClass("current")||(i.time_cell_selected={element:i.$ruler.find("#"+r),t_element:n(this),r_prompt:i.$prompts.find("#r-prompt-"+r+".prompt"),hover:!0},i.is_mouse_down_left=!0,n(this).addClass("moving"))}i.prev_cursor_x=i.get_cursor_x_position(t)}},v=function(t){if(i.is_mouse_down_left)i.time_cell_selected&&(i.time_cell_selected.hover=!0);else{var r=n(this).attr("p_id");n(this).addClass("hover");n(this).css("cursor","default");switch(h.call(this,t)){case"left":i.$prompts.find("#l-prompt-"+r+".prompt").fadeIn(150);i.$prompts.find("#r-prompt-"+r+".prompt").fadeOut(150);n(this).css("cursor","w-resize");break;case"center":n(this).hasClass("current")?(n(this).css("cursor","default"),i.$prompts.find("#l-prompt-"+r+".prompt").fadeIn(150),i.$prompts.find("#r-prompt-"+r+".prompt").fadeOut(150)):(i.$prompts.find("#l-prompt-"+r+".prompt").fadeIn(150),i.$prompts.find("#r-prompt-"+r+".prompt").fadeIn(150),n(this).css("cursor","move"));break;case"right":n(this).hasClass("current")?(n(this).css("cursor","default"),i.$prompts.find("#l-prompt-"+r+".prompt").fadeOut(150),i.$prompts.find("#r-prompt-"+r+".prompt").fadeOut(150)):(i.$prompts.find("#l-prompt-"+r+".prompt").fadeOut(150),i.$prompts.find("#r-prompt-"+r+".prompt").fadeIn(150),n(this).css("cursor","e-resize"));break;default:n(this).hasClass("current")?(i.$prompts.find("#l-prompt-"+r+".prompt").fadeIn(150),i.$prompts.find("#r-prompt-"+r+".prompt").fadeOut(150)):(i.$prompts.find("#l-prompt-"+r+".prompt").fadeIn(150),i.$prompts.find("#r-prompt-"+r+".prompt").fadeIn(150))}}},y=function(){if(i.is_mouse_down_left)i.time_cell_selected&&(i.time_cell_selected.hover=!0);else{var t=n(this).attr("p_id");i.$prompts.find("#l-prompt-"+t+".prompt").fadeOut(150);i.$prompts.find("#r-prompt-"+t+".prompt").fadeOut(150);n(this).removeClass("hover")}},f="",c,o="",e,u,r;if(!this.$ruler.find("#"+t._id).length){if(f="",c='start_timestamp="'+t.start.toString()+'"',o="",u=((t.stop?t.stop:this.options.current_timestamp)-t.start)*this.px_per_ms,r=(t.start-this.options.start_timestamp)*this.px_per_ms,r=r*1.5,u=u*1.5,t.stop?o='stop_timestamp="'+t.stop.toString()+'"':f=" current",e="left:"+r.toString()+"px;",e+="width:"+u.toString()+"px;",l=this.set_style(t.style),this.$ruler.append('<div id="'+t._id+'" class="timecell'+f+'" '+c+" "+o+' style="'+e+l+'"><\/div><div id="t'+t._id+'" p_id="'+t._id+'" class="timecell-event'+f+'" style="'+e+'"><\/div>'),this.$prompts.append('<div id="l-prompt-'+t._id+'" class="prompt" style="top:9px;left:'+(r-44).toString()+'px;"><div class="triangle-down"><\/div><div class="body">'+this.timestamp_to_date(t.start)+"<\/div><\/div>"+(t.stop?'<div id="r-prompt-'+t._id+'" class="prompt" style="top:101px;left: '+(r+u-44).toString()+'px;"><div class="triangle-up"><\/div><div class="body">'+this.timestamp_to_date(t.stop)+"<\/div><\/div>":"")),!t.stop)if(this.running_time_cell)throw new Error("Can't run several time cells");else this.running_time_cell=this.$ruler.find("#"+t._id);return s=this.$ruler.find("#t"+t._id),s.mousedown(a).mousemove(v).mouseout(y),typeof this.options.on_dblclick_timecell_callback=="function"&&s.dblclick(function(){var r=n(this).attr("p_id"),u=i.$ruler.find("#"+r),f=parseInt(u.attr("start_timestamp")),t=u.attr("stop_timestamp");t=t?parseInt(t):null;i.options.on_dblclick_timecell_callback(r,f,t)}),t}return!1};t.prototype.add_cells=function(t){var i=this;n.each(t,function(n,t){i.add_cell(t)})};t.prototype.set_time_duration=function(n){if(n){var t=parseInt(n.attr("start_timestamp")),i=n.attr("stop_timestamp")?parseInt(n.attr("stop_timestamp")):this.options.current_timestamp;this.options.show_ms||(t=Math.floor(t/1e3)*1e3,i=Math.floor(i/1e3)*1e3);n.html(this.time_duration(i-t))}};t.prototype.set_tooltips=function(n){n.l_prompt&&n.l_prompt.find(".body").text(this.timestamp_to_date(parseInt(n.element.attr("start_timestamp"))));n.r_prompt&&n.r_prompt.find(".body").text(this.timestamp_to_date(parseInt(n.element.attr("stop_timestamp"))))};t.prototype.set_current_timestamp=function(){var n=this;return function(){n.options.current_timestamp=n.frozen_current_timestamp+(new Date-n.init_timestamp);n.options.current_timestamp-n.options.start_timestamp>=36e5*n.options.hours_per_ruler}};t.prototype.set_running_elements=function(){var n=this;return function(){if(n.set_time_caret_position(),n.running_time_cell){n.set_time_duration(n.running_time_cell);var t=(n.options.current_timestamp-parseInt(n.running_time_cell.attr("start_timestamp")))*n.px_per_ms;n.running_time_cell.css("width",t);n.$ruler.find("#t"+n.running_time_cell.attr("id")).css("width",t)}}};t.prototype.set_time_caret_position=function(){this.time_caret.css("left",(this.options.current_timestamp-this.options.start_timestamp)*this.px_per_ms*1.5)};t.prototype.set_time_cells_position=function(){var t=this;this.$ruler.children(".timecell").each(function(){var u=parseInt(n(this).attr("start_timestamp")),i=(u-t.options.start_timestamp)*t.px_per_ms,r=((n(this).attr("stop_timestamp")?parseInt(n(this).attr("stop_timestamp")):t.options.current_timestamp)-u)*t.px_per_ms;n(this).css("left",i);n(this).css("width",r);t.$prompts.find("#l-prompt-"+n(this).attr("id")+".prompt").css("left",i-44);t.$ruler.find("#t"+n(this).attr("id")).css("left",i).css("width",r);t.$prompts.find("#r-prompt-"+n(this).attr("id")+".prompt").css("left",i+r-44)})};t.prototype.set_new_start_timestamp=function(n){this.set_ruler_position((this.options.start_timestamp-n)*this.px_per_ms*1.5)};t.prototype.set_ruler_position=function(t){var e=this,h,i;this.options.start_timestamp=this.options.start_timestamp-Math.round(t/this.px_per_ms);this.set_time_caret_position();var o=this.$ruler.width()/(this.options.hours_per_ruler*60),s=this.options.graduation_step,r=s/o;for(i=0;i<this.steps_by_minutes.length;i++)if(r<=this.steps_by_minutes[i]){r=this.steps_by_minutes[i];s=r*o;break}for(h=30,i=0;i<this.steps_by_minutes.length;i++)if(this.options.distance_between_gtitle/o<=this.steps_by_minutes[i]){h=this.steps_by_minutes[i];break}var v=this.ms_to_next_step(this.options.start_timestamp,r*6e4),c=this.options.start_timestamp+v-r*24e4,f,u,l,a,i=-4;if(this.$ruler.children(".graduation").each(function(){u="";f=new Date(c);l=i*s+e.px_per_ms*v;f.getUTCHours()==0&&f.getUTCMinutes()==0?u="big":c/6e4%h==0&&(u="middle");n(this).removeClass("middle big");u&&n(this).addClass(u);n(this).css("left",l);a=e.$ruler.find("#graduation-title-"+n(this).attr("id")).css("left",l-40).html(e.graduation_title(f));u?a.removeClass("hidden"):a.addClass("hidden");c+=r*6e4;i++}),this.set_time_cells_position(),typeof this.options.on_move_ruler_callback=="function")this.options.on_move_ruler_callback(this.options.start_timestamp)};t.prototype._edit_time_cell=function(n){var u=n.start!==undefined&&n.start!==null,e=n.stop!==undefined&&n.stop!==null&&n.element.attr("stop_timestamp"),i,r,t;if(u&&(i=null,n.stop!==undefined&&n.stop?i=n.stop:n.element.attr("stop_timestamp")&&(i=parseInt(n.element.attr("stop_timestamp"))),r=(n.start-this.options.start_timestamp)*this.px_per_ms*1.5,t=((i!==null?i:this.options.current_timestamp)-n.start)*this.px_per_ms*1.5,n.element.attr("start_timestamp",n.start),n.element.css("left",r),n.element.css("width",t),n.t_element.css("left",r),n.t_element.css("width",t),n.l_prompt.css("left",r-44)),e){var f=u?n.start:parseInt(n.element.attr("start_timestamp")),r=(f-this.options.start_timestamp)*this.px_per_ms*1.5,t=(n.stop-f)*this.px_per_ms*1.5;n.element.attr("stop_timestamp",n.stop);n.element.css("width",t);n.t_element.css("width",t);n.r_prompt.css("left",r+t-44)}this.set_tooltips(n)};t.prototype.set_time_cell_position=function(n){var u=this.time_cell_selected.element.attr("id"),t={element:this.time_cell_selected.element,t_element:this.time_cell_selected.t_element},i,r;if(this.time_cell_selected.l_prompt&&this.time_cell_selected.r_prompt){if(i=parseInt(this.time_cell_selected.element.attr("start_timestamp"))+Math.round(n/this.px_per_ms),r=parseInt(this.time_cell_selected.element.attr("stop_timestamp"))+Math.round(n/this.px_per_ms),t.l_prompt=this.time_cell_selected.l_prompt,t.r_prompt=this.time_cell_selected.r_prompt,t.start=i,t.stop=r,this._edit_time_cell(t),typeof this.options.on_move_timecell_callback=="function")this.options.on_move_timecell_callback(u,i,r)}else if(this.time_cell_selected.l_prompt){if(i=parseInt(this.time_cell_selected.element.attr("start_timestamp"))+Math.round(n/this.px_per_ms),t.l_prompt=this.time_cell_selected.l_prompt,t.start=i,this._edit_time_cell(t),typeof this.options.on_resize_timecell_callback=="function")this.options.on_resize_timecell_callback(u,parseInt(this.time_cell_selected.element.attr("start_timestamp")),parseInt(this.time_cell_selected.element.attr("stop_timestamp")),"left")}else if(this.time_cell_selected.r_prompt&&(r=parseInt(this.time_cell_selected.element.attr("stop_timestamp"))+Math.round(n/this.px_per_ms),t.r_prompt=this.time_cell_selected.r_prompt,t.stop=r,this._edit_time_cell(t),typeof this.options.on_resize_timecell_callback=="function"))this.options.on_resize_timecell_callback(u,parseInt(this.time_cell_selected.element.attr("start_timestamp")),parseInt(this.time_cell_selected.element.attr("stop_timestamp")),"right")};t.prototype.get_cursor_x_position=function(n){var t=0;return n||(n=window.event),n.pageX||n.pageY?t=n.pageX:(n.clientX||n.clientY)&&(t=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),t};t.prototype.cursor_moving_event=function(){var n=this;return function(t){var i=n.get_cursor_x_position(t);if(n.is_mouse_down_left)switch(n.clicked_on){case"timecell":n.time_cell_selected&&n.set_time_cell_position(i-n.prev_cursor_x);break;case"ruler":n.set_ruler_position(i-n.prev_cursor_x)}n.prev_cursor_x=i}};t.prototype.mouse_up_event=function(){var n=this;return function(t){if(t.which==1){n.is_mouse_down_left=!1;switch(n.clicked_on){case"timecell":if(n.time_cell_selected){if(n.time_cell_selected.hover||(n.$prompts.find("#l-prompt-"+n.time_cell_selected.element.attr("id")+".prompt").fadeOut(150),n.$prompts.find("#r-prompt-"+n.time_cell_selected.element.attr("id")+".prompt").fadeOut(150),n.time_cell_selected.t_element.removeClass("hover")),typeof n.options.on_change_timecell_callback=="function")n.options.on_change_timecell_callback(n.time_cell_selected.element.attr("id"),parseInt(n.time_cell_selected.element.attr("start_timestamp")),parseInt(n.time_cell_selected.element.attr("stop_timestamp")));n.time_cell_selected.t_element.removeClass("moving");n.time_cell_selected=null}break;case"ruler":n.options.ruler_enable_move&&typeof n.options.on_change_ruler_callback=="function"&&n.options.on_change_ruler_callback.bind(n)(n.options.start_timestamp)}n.clicked_on=null}}};t.prototype.ruler_mouse_down_event=function(){var n=this;return function(t){t.which==1&&(n.clicked_on="ruler",n.is_mouse_down_left=!0,n.prev_cursor_x=n.get_cursor_x_position(t))}};i=n.fn.TimeSlider;n.fn.TimeSlider=r;n.fn.TimeSlider.VERSION=t.VERSION;n.fn.TimeSlider.noConflict=function(){return n.fn.TimeSlider=i,this}}(jQuery);