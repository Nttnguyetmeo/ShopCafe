"use strict";jQuery(document).ready(function(n){function p(r){r.each(function(){var e=n(this),r={},f;r.timelineWrapper=e.find(".events-wrapper");r.eventsWrapper=r.timelineWrapper.children(".events");r.fillingLine=r.eventsWrapper.children(".filling-line");r.timelineEvents=r.eventsWrapper.find("a");r.timelineDates=b(r.timelineEvents);r.eventsMinLapse=k(r.timelineDates);r.timelineNavigation=e.find(".cd-timeline-navigation");r.eventsContent=e.children(".events-content");f=w(r,i);e.addClass("loaded");r.timelineNavigation.on("click",".next",function(n){n.preventDefault();o(r,f,"next")});r.timelineNavigation.on("click",".prev",function(n){n.preventDefault();o(r,f,"prev")});r.eventsWrapper.on("click","a",function(t){t.preventDefault();r.timelineEvents.removeClass("selected");n(this).addClass("selected");c(n(this));u(n(this),r.fillingLine,f);h(n(this),r.eventsContent)});r.eventsContent.on("swipeleft",function(){var n=y();n=="mobile"&&t(r,f,"next")});r.eventsContent.on("swiperight",function(){var n=y();n=="mobile"&&t(r,f,"prev")});n(document).keyup(function(n){n.which=="37"&&v(e.get(0))?t(r,f,"prev"):n.which=="39"&&v(e.get(0))&&t(r,f,"next")})})}function o(n,t,u){var e=l(n.eventsWrapper),f=Number(n.timelineWrapper.css("width").replace("px",""));u=="next"?r(n,e-f+i,f-t):r(n,e+f-i)}function t(n,t,i){var e=n.eventsContent.find(".selected"),o=i=="next"?e.next():e.prev(),f,r;o.length>0&&(f=n.eventsWrapper.find(".selected"),r=i=="next"?f.parent("li").next("li").children("a"):f.parent("li").prev("li").children("a"),u(r,n.fillingLine,t),h(r,n.eventsContent),r.addClass("selected"),f.removeClass("selected"),c(r),s(i,r,n))}function s(n,t,i){var o=window.getComputedStyle(t.get(0),null),u=Number(o.getPropertyValue("left").replace("px","")),f=Number(i.timelineWrapper.css("width").replace("px","")),s=Number(i.eventsWrapper.css("width").replace("px","")),e=l(i.eventsWrapper);(n=="next"&&u>f-e||n=="prev"&&u<-e)&&r(i,-u+f/2,f-s)}function r(n,t,i){var r=n.eventsWrapper.get(0);t=t>0?0:t;t=!(typeof i=="undefined")&&t<i?i:t;a(r,"translateX",t+"px");t==0?n.timelineNavigation.find(".prev").addClass("inactive"):n.timelineNavigation.find(".prev").removeClass("inactive");t==i?n.timelineNavigation.find(".next").addClass("inactive"):n.timelineNavigation.find(".next").removeClass("inactive")}function u(n,t,i){var u=window.getComputedStyle(n.get(0),null),r=u.getPropertyValue("left"),e=u.getPropertyValue("width"),f;r=Number(r.replace("px",""))+Number(e.replace("px",""))/2;f=r/i;a(t.get(0),"scaleX",f)}function w(n,t){var e=f(n.timelineDates[0],n.timelineDates[n.timelineDates.length-1]),r=e/n.eventsMinLapse,r=Math.round(r)+4,i=r*t;return n.eventsWrapper.css("width",i+"px"),u(n.eventsWrapper.find("a.selected"),n.fillingLine,i),s("next",n.eventsWrapper.find("a.selected"),n),i}function h(n,t){var e=n.data("date"),r=t.find(".selected"),i=t.find('[data-date="'+e+'"]'),o=i.height(),u,f;i.index()>r.index()?(u="selected enter-right",f="leave-left"):(u="selected enter-left",f="leave-right");i.attr("class",u);r.attr("class",f).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){r.removeClass("leave-right leave-left");i.removeClass("enter-left enter-right")});t.css("height",o+"px")}function c(n){n.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}function l(n){var i=window.getComputedStyle(n.get(0),null),t=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("-moz-transform")||i.getPropertyValue("-ms-transform")||i.getPropertyValue("-o-transform")||i.getPropertyValue("transform"),r;return t.indexOf("(")>=0?(t=t.split("(")[1],t=t.split(")")[0],t=t.split(","),r=t[4]):r=0,Number(r)}function a(n,t,i){n.style["-webkit-transform"]=t+"("+i+")";n.style["-moz-transform"]=t+"("+i+")";n.style["-ms-transform"]=t+"("+i+")";n.style["-o-transform"]=t+"("+i+")";n.style.transform=t+"("+i+")"}function b(t){var i=[];return t.each(function(){var e=n(this),t=e.data("date").split("T"),r,u,f;t.length>1?(r=t[0].split("/"),u=t[1].split(":")):t[0].indexOf(":")>=0?(r=["2000","0","0"],u=t[0].split(":")):(r=t[0].split("/"),u=["0","0"]);f=new Date(r[2],r[1]-1,r[0],u[0],u[1]);i.push(f)}),i}function f(n,t){return Math.round(t-n)}function k(n){for(var r,i=[],t=1;t<n.length;t++)r=f(n[t-1],n[t]),i.push(r);return Math.min.apply(null,i)}function v(n){for(var t=n.offsetTop,i=n.offsetLeft,r=n.offsetWidth,u=n.offsetHeight;n.offsetParent;)n=n.offsetParent,t+=n.offsetTop,i+=n.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+u>window.pageYOffset&&i+r>window.pageXOffset}function y(){return window.getComputedStyle(document.querySelector(".cd-horizontal-timeline"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}var e=n(".cd-horizontal-timeline"),i=60;e.length>0&&p(e)});