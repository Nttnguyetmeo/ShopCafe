function AllLog_Omicall(n,t,i,r,u,f,e){var h=[],o=[],s=[];f=="phone"?u!=""&&(s=LogCall_Omicall(n,t,i,r,u,e,"keyword")):f=="ext"&&u!=""&&(s=LogCall_Omicall(n,t,i,r,u,e,"sip_user"));o=$.merge([],s);for(let n=0;n<o.length;n++){let t={},i=o[n];t.from=i.sip_user;t.to=i.destination_number;t.direction=i.direction;t.duration=i.bill_sec;t.state=i.disposition;t.recordUrl=i.recording_file!=null?i.recording_file:"";t.start=ConvertTimeSpanToDateTime(i.time_start_to_answer);t.status=i.disposition=="answered"?"SUCCESS":"";h.push(t)}return h}function LogCall_Omicall(n,t,i,r,u,f,e){let o="",s,l=ConvertString_DMY_To_DateTime(i),h=ConvertString_DMY_To_DateTime(r),a=l.getTime(),c=h.addDays(1).addMinutes(-1).getTime();e=="sip_user"?o=n+"/call_transaction/list?sip_user="+u+"&from_date="+a+"&to_date="+c+"&page="+f:e=="keyword"&&(o=n+"/call_transaction/list?keyword="+u+"&from_date="+h.addDays(-29).getTime()+"&to_date="+c+"&page="+f);let v=Auth_Omicall(n,t);return $.ajax({url:o,contentType:"application/json; charset=utf-8",headers:{Authorization:"Bearer "+v},type:"GET","async":!1,error:function(){notiError_SW()},success:function(n){let t=n.payload;s=t!=null&&Object.keys(t).length>0?t.items:[]}}),s}function Auth_Omicall(n,t){let i="",r=n+"/auth?apikey="+t;return $.ajax({url:r,contentType:"application/json",headers:{"Content-Type":"application/json"},type:"GET","async":!1,error:function(){notiError_SW()},success:function(n){let t=n.payload;i=t!=null&&Object.keys(t).length>0?t.access_token:""}}),i}