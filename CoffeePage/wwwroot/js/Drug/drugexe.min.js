function DSD_EventRow(n){$("#DSD_Tablebody #row_"+n+" .ui.dropdown").dropdown({allowCategorySelection:!0,forceSelection:!1,transition:"fade up"});$("#row_"+n+" .numberExport").unbind("change").change(function(){let n=this.id.replace("DSD_number_","");data_product[n].number=Number(this.value).toFixed(2);DSD_CountTotalExport(n)});$("#row_"+n+" .productExport").unbind("change").change(function(){let n=this.id,t=n.replace("DSD_product_",""),i=Number($("#"+n).dropdown("get value"))?Number($("#"+n).dropdown("get value")):0;data_product[t].productID=i;DSD_Fillunit(i,t);IsPackageNumber==1&&DSD_Fillpackage(i,t)});$("#row_"+n+" .packageNumber").unbind("change").change(function(){let t=this.id.replace("DSD_packageNumber_",""),n=this.value.trim();data_product[t].package=n==""?"":n});$("#row_"+n+" .unitProduct").unbind("change").change(function(){let n=this.id,t=n.replace("DSD_unit_","");data_product[t].unitID=Number($("#"+n).dropdown("get value"))?Number($("#"+n).dropdown("get value")):0;DSD_CountTotalExport(t)});$("#DSD_Tablebody #row_"+n+" .buttonDeleteClass").on("click",function(n){let t=$(this).attr("data-id");delete data_product[t];$("#row_"+t).remove();n.stopPropagation()})}async function DSD_FillData(n,t){return new Promise(i=>{let r=DataProduct;DSD_extype==2&&(r=r.filter(n=>n.IsMedicine==1));Load_Combo(r,"cbbDSD_product_"+n,!0);$("#DSD_product_"+n).dropdown("refresh");$("#DSD_product_"+n).dropdown("set selected",t.productID);Number(t.productID)!=0&&(DSD_Fillunit(t.productID,n),$("#DSD_unit_"+n).dropdown("refresh"),$("#DSD_unit_"+n).dropdown("set selected",t.unitID),IsPackageNumber==1&&DSD_Fillpackage(t.productID,n,t.exPackageID));$("#DSD_packageExpired_"+n).val(t.package);$("#DSD_packageNumber_"+n).val(t.package);$("#DSD_number_"+n).val(t.number);i()})}function DSD_Fillunit(n,t){$("#DSD_unit_"+t).dropdown("clear");$("#DSD_unit_"+t).dropdown("refresh");let i=[],r=DataProduct.filter(t=>t.ID==n);if(r&&r.length>0){i.push({ID:r[0].UnitID,Name:r[0].UnitName});let u=DataUnitProduct.filter(t=>t.ProductID==n);if(u!=undefined&&u.length>0)for(let n=0;n<u.length;n++)i.push({ID:u[n].UnitChange,Name:u[n].UnitChangeName});Load_Combo(i,"cbbDSD_unit_"+t,!0);$("#DSD_unit_"+t).dropdown("clear");$("#DSD_unit_"+t).dropdown("refresh");$("#DSD_unit_"+t).dropdown("set selected",Number(i[0].ID))}}function DSD_Fillpackage(n,t,i=0){AjaxLoad(url="/WareHouse/DrugStore/DrugStoreDetail/?handler=LoadPackNum",data={ProductID:n,WareID:DSD_WareCurrent,MasterID:DSD_ExportID},async=!0,error=null,success=function(n){if(n!="0"){let r=JSON.parse(n);if(r&&r.length!=0)for(let n=0;n<r.length;n++)DSD_DataPackage[r[n].ID]=r[n],r[n].Name=r[n].Name;Load_Combo(r,"cbbDSD_package_"+t,!0);$("#DSD_package_"+t).dropdown("clear");$("#DSD_package_"+t).dropdown("refresh");$("#DSD_package_"+t).unbind("change").change(function(){let i=this.id,n=i.replace("DSD_package_",""),t=$(this).dropdown("get value");t!=undefined&&t!=0?($("#DSD_packageNumber_"+n).val(DSD_DataPackage[t].Name),$("#DSD_packageExpired_"+n).html(ConvertDateTimeUTC_DMY(DSD_DataPackage[t].DateExpired)),data_product[n].package=DSD_DataPackage[t].Name):($("#DSD_packageNumber_"+n).val(""),$("#DSD_packageExpired_"+n).html(""),data_product[n].package="")});$("#DSD_package_"+t).dropdown("set selected",Number(i??0))}},sender=null,before=function(){$("#package_wait_"+t).show()},complete=function(){$("#package_wait_"+t).hide()},nolimit=1)}function DSD_Renunit(n){return`<div class="ui fluid search selection dropdown unitProduct form-control w-auto" id="DSD_unit_${n}">
                <input type="hidden" />
                <input class="search" autocomplete="off" tabindex="0" /><div class="default text">eg .${Outlang.Don_vi}</div>
                <div id="cbbDSD_unit_${n}" class="menu" tabindex="-1">
                </div>
            </div>`}function DSD_Renproduct(n){return`<div class="ui fluid search selection dropdown productExport form-control" id="DSD_product_${n}">
                <input type="hidden" />
                <input class="search" autocomplete="off" tabindex="0" />
                <div class="default text">eg .${Outlang.San_pham}</div>
                <div id="cbbDSD_product_${n}" class="menu" tabindex="-1">
                </div>
            </div>`}function DSD_Rennumber(n,t){return`<input name="numberFloat" class="ps-2 numberExport form-control"
                id="DSD_number_${n}" value="${t}" placeholder="eg .${Outlang.So_luong}" />`}function DSD_Renpackage(n,t){if(IsPackageNumber==0)return"";return`

                        <div class="ui fluid search selection dropdown packageNumber form-control w-auto" id="DSD_package_${n}">
                            <input type="hidden" />
                            <input class="search" autocomplete="off" tabindex="0" />
                            <div class="default text">eg .${Outlang.So_lo}</div>
                            <div id="cbbDSD_package_${n}" class="menu" tabindex="-1">
                            </div>
                        </div>
                        <input class="ps-2 form-control packageNumber" id="DSD_packageNumber_${n}"  />
                        <span class="input-group-text">
                            <i style="display:none" id="package_expired_error_${t}" class="fas fa-exclamation-triangle text-danger fw-bold"></i>
                            <i style="display:none" id="package_expired_success_${t}" class="fa-check fas text-success fw-bold "></i>
                            <span id="DSD_packageExpired_${n}" class="ms-2"></span>
                        </span>

                    `}