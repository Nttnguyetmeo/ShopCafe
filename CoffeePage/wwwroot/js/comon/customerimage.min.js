function MinusLimitIfExist_ForDemo(){AjaxLoad(url="/Customer/CustomerImage/?handler=MinusLimitIfExist_ForDemo",data={},async=!0,error=function(){notiError_SW()},success=function(){CheckLimitUpload_ForDemo_ForDemo()})}function CheckLimitUpload_ForDemo_ForDemo(){AjaxLoad(url="/Customer/CustomerImage/?handler=CheckLimit",data={},async=!0,error=function(){notiError_SW()},success=function(n){n!="1"&&($("#uploadButton").empty(),document.getElementById("uploadButton").innerHTML="Hết Số Lượt Upload")})}function EditImageGallery(){CurrentFolderName_Customer!=""&&AjaxLoad(url="/Customer/CustomerImage/?handler=LoadImageByFolder",data={currentFolderID:CurrentFolderID_Customer},async=!0,error=function(){notiError_SW()},success=function(n){let t=JSON.parse(n);t!=undefined&&(RenderImageGalleryToDelete(t,"lightgalleryTableEdit"),Prepare_SH_WhenEdit_Image())})}function RenderImageGalleryToDelete(n,t){var r=document.getElementById(t),i;if(r!=null){r.innerHTML="";let u="";if(n&&n.length>0)for(i=0;i<n.length;i++){let t="",r=n[i];t=t+'<div class="ui segments image_edit_parent"><div class="ui segment"><img style="width: 100px;height: 100px;object-fit: cover;" src="'+r.link+'" /><\/div><div class="ui segment" style="text-align:center;"><div class="ui checkbox"><input data_id="'+r.id+'" data_name="'+r.realname+'" type = "checkbox"  name = "checkImageDelete"><label class="coloring red"><\/label><\/div><\/div><\/div>';u=u+t}document.getElementById(t).innerHTML=u}}function CanceEditImage(){Done_SH_WhenEdit_Image()}function SaveEditImage(){let t=[];var n=document.getElementsByName("checkImageDelete");for(let i=0;i<n.length;i++)if(n[i].checked){let r={};r.id=n[i].attributes.data_id.value;r.value=n[i].attributes.data_name.value;t.push(r)}AjaxLoad(url="/Customer/CustomerImage/?handler=DeleteImage",data={data:JSON.stringify(t),cusID:ser_MainCustomerID,folder:CurrentFolderName_Customer},async=!0,error=function(){notiError_SW()},success=function(n){n=="1"?(Done_SH_WhenEdit_Image(),Load_Image_Customer(CurrentFolderID_Customer),LoadImgByForm(CurrentFolderID_Customer),notiSuccess()):notiError_SW()})}function EditFileGallery(){CurrentFolderName_Customer!=""&&AjaxLoad(url="/Customer/CustomerImage/?handler=LoadFileByFolder",data={currentFolderID:CurrentFolderID_Customer},async=!0,error=function(){notiError_SW()},success=function(n){let t=JSON.parse(n);t!=undefined&&(RenderFileGalleryToDelete(t,"lightgalleryTableEdit_File"),Prepare_SH_WhenEdit_File())})}function CanceEditFile(){Done_SH_WhenEdit_File()}function SaveEditFile(){let t=[];var n=document.getElementsByName("checkFileDelete");for(let i=0;i<n.length;i++)if(n[i].checked){let r={};r.id=n[i].attributes.data_id.value;r.value=n[i].attributes.data_name.value;t.push(r)}AjaxLoad(url="/Customer/CustomerImage/?handler=DeleteFile",data={data:JSON.stringify(t),cusID:ser_MainCustomerID,folder:CurrentFolderName_Customer},async=!0,error=function(){notiError_SW()},success=function(n){n=="1"?(Done_SH_WhenEdit_File(),Load_File_Customer(CurrentFolderID_Customer),notiSuccess()):notiError_SW()})}function RenderFileGalleryToDelete(n,t){var r=document.getElementById(t),i;if(r!=null){r.innerHTML="";let u="";if(n&&n.length>0)for(i=0;i<n.length;i++){let r="",t=n[i];r=r+'<div class="ui segments file_edit_parent"><div class="ui segment file_edit_child">'+GetImageTypeFile(t.type)+'<div class="fileCustomer"><span>'+t.name+"<\/span><\/br><span>"+t.createdby+"<\/span><\/br><span>"+t.created+'<\/span><\/div><\/div><div class="ui segment" style="text-align:center;"><div class="ui checkbox"><input data_id="'+t.id+'" data_name="'+t.realname+'" type = "checkbox"  name = "checkFileDelete"><label class="coloring red"><\/label><\/div><\/div><\/div>';u=u+r}document.getElementById(t).innerHTML=u}}function Load_Image_Customer(n){xhrRequest_Image&&xhrRequest_Image.readyState!=4&&xhrRequest_Image.abort();$("#lightgallery").hide();countImage=0;xhrRequest_Image=AjaxLoad(url="/Customer/CustomerImage/?handler=LoadImageByFolder",data={currentFolderID:n},async=!1,error=function(){xhrRequest_Image&&xhrRequest_Image.readyState!=4&&xhrRequest_Image.abort()},success=function(t){let i=JSON.parse(t);dataImageCustomer=i;i!=undefined&&(RenderImageGallery(i,"lightgallery"),EventImageGalerryClick(),lightGallery(document.getElementById("lightgallery")),$("#lightgallery").show(),countImage+=i.length,DragDropEvent_Item_Img());let r=countFile+countImage;r!=0&&($("#folder-"+n).text(r),$("#folder-"+n).css("display","block"))})}function EventImageGalerryClick(){var n=$("#lightgallery");n.on("onAfterOpen.lg",function(){try{_dim_galery_1=document.getElementsByClassName("lg-backdrop")[0];_dim_galery_2=document.getElementsByClassName("lg")[0];_dim_galery_1.style.display="none";_dim_galery_2.style.display="none";setTimeout(function(){CurrentEditDescriptionImage==0&&(_dim_galery_1.style.display="block",_dim_galery_2.style.display="block")},300)}catch(n){}});$("#lightgallery").on("click",".button-edit-des",function(n){CurrentEditDescriptionImage=1;editDesciption_ImageCustomer($(this).attr("data-id"));n.stopImmediatePropagation()})}function RenderImageGallery(n,t){var r=document.getElementById(t),i;if(r!=null){r.innerHTML="";let u="";if(n&&n.length>0)for(i=0;i<n.length;i++){let t=n[i],r="'"+t.link+"'",f='<a data-id="'+t.id+'" class="description-rp design_img_item" href="'+t.link+'" data-name="'+t.name+'" data-created="'+t.created+'" data-content="'+t.description+'" data-variation="inverted blueli" data-createdby="'+t.name+'" style="background-image: url('+r+')"><img style="width: 0px;height: 0px;object-fit: cover;opacity: 0;" src="'+t.link+'"/><i data-id="'+t.id+'" class="pencil alternate icon button-edit-des"><\/i><\/a>';u=u+f}else u='<div class="sheet_cart_load_empty" style="pointer-events: none;" > no content <\/div>';document.getElementById(t).innerHTML=u;$(".description-rp").popup({transition:"vertical flip",on:"hover",position:"bottom center"})}}function Load_File_Customer(n){xhrRequest_File&&xhrRequest_File.readyState!=4&&xhrRequest_File.abort();countFile=0;$("#lightgallery_File").hide();xhrRequest_File=AjaxLoad(url="/Customer/CustomerImage/?handler=LoadFileByFolder",data={currentFolderID:n},async=!1,error=function(){xhrRequest_File&&xhrRequest_File.readyState!=4&&xhrRequest_File.abort()},success=function(t){let i=JSON.parse(t);dataFileCustomer=i;i!=undefined&&(RenderFileGallery(i,"lightgallery_File"),$("#lightgallery_File").show(),countFile+=i.length);let r=countFile+countImage;r!=0&&($("#folder-"+n).text(r),$("#folder-"+n).css("display","block"))})}function RenderFileGallery(n,t){var r=document.getElementById(t),i;if(r!=null){r.innerHTML="";let u="";if(n&&n.length>0)for(i=0;i<n.length;i++){let t=n[i],r='<a class="file_pdf" target="_blank" href="'+t.link+'" data-name="'+t.name+'" data-created="'+t.created+'" data-createdby="'+t.createdby+'"data-title="'+t.name+'" data-content="'+t.createdby+"\n"+t.created+'" >'+GetImageTypeFile(t.type)+'<div class="fileCustomer"><span>'+t.name+"<\/span><\/br><span>"+t.createdby+"<\/span><\/br><span>"+t.created+"<\/span><\/div><\/a>";u=u+r}else u='<div class="sheet_cart_load_empty" style=" " >no content <\/div>';document.getElementById(t).innerHTML=u}}function GetImageTypeFile(n){switch(n){case"doc":return'<img src="/assests/img/ButtonImg/file_doc.png" style="width: 50px; height: 50px ;object-fit: cover;"/>';case"pdf":return'<img src="/assests/img/ButtonImg/file_pdf.png" style="width: 50px; height: 50px;object-fit: cover;"/>';case"xls":return'<img src="/assests/img/ButtonImg/file_xls.png" style="width: 50px; height: 50px object-fit: cover;"/>'}}function Prepare_SH_WhenEdit_File(){document.getElementById("uploadButton_File").style.display="none";document.getElementById("lightgallery_File").style.display="none";document.getElementById("btnEditImage_File")&&(document.getElementById("btnEditImage_File").style.display="none");document.getElementById("btnEditImageOK_File").style.display="block";document.getElementById("btnEditImageCancel_File").style.display="block";document.getElementById("lightgalleryTableEdit_File").style.display="";document.getElementById("noticeDelete_File").style.display="block";document.getElementById("noticeDelete_File_notification").style.display="block"}function Done_SH_WhenEdit_File(){document.getElementById("uploadButton_File").style.display="block";document.getElementById("lightgallery_File").style.display="block";document.getElementById("btnEditImage_File")&&(document.getElementById("btnEditImage_File").style.display="block");document.getElementById("btnEditImageOK_File").style.display="none";document.getElementById("btnEditImageCancel_File").style.display="none";document.getElementById("lightgalleryTableEdit_File").style.display="none";document.getElementById("noticeDelete_File").style.display="none";document.getElementById("noticeDelete_File_notification").style.display="none"}function Prepare_SH_WhenEdit_Image(){$(".actionImg").hide();document.getElementById("uploadButton").style.display="none";document.getElementById("lightgallery").style.display="none";document.getElementById("btnEditImage")&&(document.getElementById("btnEditImage").style.display="none");document.getElementById("btnEditImageOK").style.display="block";document.getElementById("btnEditImageCancel").style.display="block";document.getElementById("lightgalleryTableEdit").style.display="";document.getElementById("noticeDelete").style.display="block";document.getElementById("noticeDelete_notification").style.display="block"}function Done_SH_WhenEdit_Image(){$(".actionImg").show();document.getElementById("uploadButton").style.display="block";document.getElementById("lightgallery").style.display="block";document.getElementById("btnEditImage")&&(document.getElementById("btnEditImage").style.display="block");document.getElementById("btnEditImageOK").style.display="none";document.getElementById("btnEditImageCancel").style.display="none";document.getElementById("lightgalleryTableEdit").style.display="none";document.getElementById("noticeDelete").style.display="none";document.getElementById("noticeDelete_notification").style.display="none"}function Preapare_SH_FolderCustomer(){CurrentFolderName_Customer="";$(".actionImg").hide();document.getElementById("uploadButton")&&(document.getElementById("uploadButton").style.display="none");document.getElementById("btnEditImage")&&(document.getElementById("btnEditImage").style.display="none");document.getElementById("btnSetImage")&&(document.getElementById("btnSetImage").style.display="none");document.getElementById("btnEditImageOK")&&(document.getElementById("btnEditImageOK").style.display="none");document.getElementById("btnEditImageCancel")&&(document.getElementById("btnEditImageCancel").style.display="none");$(".actionFile").hide();document.getElementById("uploadButton_File")&&(document.getElementById("uploadButton_File").style.display="none");document.getElementById("btnEditImage_File")&&(document.getElementById("btnEditImage_File").style.display="none");document.getElementById("btnEditImageOK_File")&&(document.getElementById("btnEditImageOK_File").style.display="none");document.getElementById("btnEditImageCancel_File")&&(document.getElementById("btnEditImageCancel_File").style.display="none")}function Done_SH_FolderCustomer(){$("#lightgallery").show();$("#lightgalleryTableEdit").hide();$("#noticeDelete").hide();$("#noticeDelete_notification").hide();$("#uploadButton").show();$("#btnEditImage").show();$("#btnSetImage").show();$("#btnEditImageOK").hide();$("#btnEditImageCancel").hide();$("#lightgallery_File").show();$("#lightgalleryTableEdit_File").hide();$("#noticeDelete_File").hide();$("#noticeDelete_File_notification").hide();$("#uploadButton_File").show();$("#btnEditImage_File").show();$("#btnEditImageOK_File").hide();$("#btnEditImageCancel_File").hide()}function Event_Click_Folder_Customer(){$(".ui.menu#TreeFolderName_Customer a.item").unbind().click(function(){CurrentFolderID_Customer=$(this).attr("data_id");ContentIMG(CurrentFolderID_Customer);$("#TreeFolderName_Customer a.item").each(function(){$(this).removeClass("active")});$(this).addClass("active");$("#seg_image").show();$("#seg_file").show();countImage=0;countFile=0;var n=$("#TreeFolderName_Customer a.active.item")[0].getAttribute("data-foldername");n?Done_SH_FolderCustomer():n="Image";CurrentFolderName_Customer=n;$(".btn-sort").each(function(){$(this).removeClass("active");$(this).css("pointer-events","unset")});link_Upload_Image="/Api/Upload/Upload?CustomerID="+ser_MainCustomerID+"&FolderName="+CurrentFolderName_Customer+"&Type=Image";link_Upload_File="/Api/Upload/Upload?CustomerID="+ser_MainCustomerID+"&FolderName="+CurrentFolderName_Customer+"&FolderNameChild=File&Type=AttachmentFile";LoadImgByForm(CurrentFolderID_Customer)})}function Event_Click_Folder_Cust_TreatPlan(){$("#FolderTreatmentPlan a.item").unbind().click(function(){CurrentFolderID_Customer=$(this).attr("data_id");ContentIMGByTreatPlan(CurrentFolderID_Customer);$("#FolderTreatmentPlan a.item").each(function(){$(this).removeClass("active")});$(this).addClass("active");countImage=0;countFile=0;var n=$("#FolderTreatmentPlan a.active.item")[0].getAttribute("data-foldername");n?Done_SH_FolderCustomer():n="Image";CurrentFolderName_Customer=n;$(".btn-sort").each(function(){$(this).removeClass("active");$(this).css("pointer-events","unset")});link_Upload_Image="/UploadClass/FileUploadHandler.ashx?CustomerID="+ser_MainCustomerID+"&FolderName="+CurrentFolderName_Customer+"&Type=Image";link_Upload_File="/UploadClass/FileUploadHandler.ashx?CustomerID="+ser_MainCustomerID+"&FolderName="+CurrentFolderName_Customer+"&FolderNameChild=File&Type=AttachmentFile";LoadImgByForm(CurrentFolderID_Customer)})}function EventClick_Folder_Edit(){$(".image_edit_folder").on("click",function(n){n.stopPropagation();n.stopImmediatePropagation();editFolder_ImageCustomer($(this).attr("data_id"),$(this).attr("data_name"))});$(".image_delete_folder").on("click",function(n){n.stopPropagation();n.stopImmediatePropagation();DeleteFolderImage_Customer($(this).attr("data_id"),$(this).attr("data_name"))})}function DeleteFolderImage_Customer(n,t){const i=notiConfirm();i.then(function(){ExecuteDeleteFolderImage_Customer(n,t)},function(){})}function ExecuteDeleteFolderImage_Customer(n,t){AjaxLoad(url="/Customer/CustomerImage/?handler=DeleteFolder",data={customer:ser_MainCustomerID,id:n,name:t},async=!0,error=function(){notiError_SW()},success=function(n){n=="1"?(notiSuccess(),LoadFolderTree_Customer_File_Image()):notiError_SW()})}function RenFolderImage_Customer_File_Image(n,t){var r=document.getElementById(t),i;if(r!=null){r.innerHTML="";let u="";if(n&&n.length>0)for(i=0;i<n.length;i++){let t=n[i],r='<div class="tree-item"><div class="tree-item_button"><div class="button button_ellipsis"><i class="ellipsis horizontal icon"><\/i><\/div><a class="image_edit_folder button_ellipsis_item" data_name="'+t.FolderName+'" data_id="'+t.ID+'"><i class="button_ellipsis_item vtt-icon vttech-icon-edit"><\/i><\/a><a class="image_delete_folder button_ellipsis_item" data_name="'+t.FolderName+'" data_id="'+t.ID+'"><i class="button_ellipsis_item vtt-icon vttech-icon-delete"><\/i><\/a><\/div><a id="folder_image_'+t.ID+'" data_id="'+t.ID+'" data-foldername="'+t.FolderName+'" class="item"><i class="vtt-icon vttech-icon-folder_40"><\/i> <span>'+t.FolderName+'<\/span><div class="folder-count" id="folder-'+t.ID+'" style="'+(t.Number!=0?"display:block":"display:none")+'" >'+(t.Number!=0?t.Number:"")+"<\/div><\/a><\/div>";u=u+r}document.getElementById(t).innerHTML=u}EventClick_Folder_Edit()}function SortAscending(){let n,t;n=dataFileCustomer.sort(function(n,t){var i=n.name.toLowerCase(),r=t.name.toLowerCase();return i<r?-1:i>r?1:0});t=dataImageCustomer.sort(function(n,t){var i=n.name.toLowerCase(),r=t.name.toLowerCase();return i<r?-1:i>r?1:0});RenderFileGallery(n,"lightgallery_File");RenderImageGallery(t,"lightgallery");DragDropEvent_Item_Img()}function SortDescending(){let n,t;n=dataFileCustomer.sort(function(n,t){var i=n.name.toLowerCase(),r=t.name.toLowerCase();return i>r?-1:i<r?1:0});t=dataImageCustomer.sort(function(n,t){var i=n.name.toLowerCase(),r=t.name.toLowerCase();return i>r?-1:i<r?1:0});RenderFileGallery(n,"lightgallery_File");RenderImageGallery(t,"lightgallery");DragDropEvent_Item_Img()}function SortDateAscending(){let n,t;n=dataFileCustomer.sort(function(n,t){var i=n.creatednum.toLowerCase(),r=t.creatednum.toLowerCase();return i<r?-1:i>r?1:0});t=dataImageCustomer.sort(function(n,t){var i=n.creatednum.toLowerCase(),r=t.creatednum.toLowerCase();return i<r?-1:i>r?1:0});RenderFileGallery(n,"lightgallery_File");RenderImageGallery(t,"lightgallery");DragDropEvent_Item_Img()}function SortDateDescending(){let n,t;n=dataFileCustomer.sort(function(n,t){var i=n.creatednum.toLowerCase(),r=t.creatednum.toLowerCase();return i>r?-1:i<r?1:0});t=dataImageCustomer.sort(function(n,t){var i=n.creatednum.toLowerCase(),r=t.creatednum.toLowerCase();return i>r?-1:i<r?1:0});RenderFileGallery(n,"lightgallery_File");RenderImageGallery(t,"lightgallery");DragDropEvent_Item_Img()}function Insert_Image_File_Customer(n,t,i,r){AjaxLoad(url="/Customer/CustomerImage/?handler=InsertImage",data={type:n,folderid:t,name:i,realname:r},async=!0,error=function(){notiError_SW()},success=function(){n=="image"?Load_Image_Customer(t):Load_File_Customer(t)})}function LoadTemplateForm(){AjaxLoad(url="/Customer/CustomerImage/?handler=LoadTemplateForm",data={},async=!1,error=function(){notiError_SW()},success=function(n){let t=JSON.parse(n);t.length>0&&(DataTemplateList_Default=t,ReloadTemplateForm())})}function ReloadTemplateForm(){if(CurrentFolderName_Customer!=""&&DataTemplateList_Default.length>0){let n=[],t=DataTemplateList_Default;for(let i=0;i<t.length;i++){let r=DataTemplateList.filter(n=>n.TemplateID==t[i].TemplateID);r.length==0?n.push(t[i]):r.length>0&&n.push(r[0])}if(DataTemplateList=n,DataTemplateList!=undefined&&DataTemplateList.length>0){RenderTemplateList(DataTemplateList,"TemplateList");for(let n=0;n<DataTemplateList.length;n++)if(DataTemplateList[n].ID){TemplateID=DataTemplateList[n].TemplateID;break}TemplateID==0&&(TemplateID=DataTemplateList[0].TemplateID);RenderDataTemplate(TemplateID)}else console.log("form error or form not defined");DragDropEvent_Item_Img()}}function RenderDataTemplate(n){if(DataTemplateList.length>0){let t=DataTemplateList.filter(t=>t.TemplateID==n)[0];TemplateID=n;DataTemplate=JSON.parse(t.DataTemplate)}RenderImgByForm(DataTemplate,"templateForm")}function RenderTemplateList(n,t){var r=document.getElementById(t),i;if(r!=null){r.innerHTML="";let u="";if(n&&n.length>0){let t=0,r=0;for(i=0;i<n.length;i++){let f=n[i],e="";f.ID&&(e="exist");f.ID&&r==0&&(t=f.ID,r=1);let o='<div class="tempItem ui button '+e+(t==f.ID?" ischoose":"")+'" data-id="'+f.TemplateID+'">'+f.Name+"<\/div>";u=u+o}}document.getElementById(t).innerHTML=u}}function RenderImgByForm(n,t){var u=document.getElementById(t),i,r;if(u!=null){u.innerHTML="";let e="",f=n;if(f){let n=0;for($("#templateForm").css("grid-template-columns","repeat("+f.columns+", 1fr)"),$("#templateForm").css("grid-template-rows","repeat("+f.rows+", 1fr)"),i=0;i<f.rows;i++){let t="";for(r=0;r<f.columns;r++){let i=f.data[n].content,r=f.data[n].header!=""?'<div class="title_template">'+f.data[n].header+"<\/div>":"",u=f.data[n].header!=""&&f.position!="left"?"header_template":"";if(i.value==1){let n="";if(dataImageCustomer!=undefined&&dataImageCustomer.find(n=>n.id===i.img)!=undefined){let t=dataImageCustomer.find(n=>n.id===i.img);n='<img class="imgform" src="'+t.link+'"><i data-id="'+t.id+'" data-x="'+i.x+'" data-y="'+i.y+'" class="delete alternate icon button-delete-img-form"><\/i>'}else n='<div class="text_img">'+i.placehoder+"<\/div>";let e=f.position=="left"?'style="display:flex;"':"";t+="<div "+e+' class="img-content '+u+'">'+r+'<div  data-x="'+i.x+'" data-y="'+i.y+'" class="selectdrop" >'+n+"<\/div><\/div>"}else t+='<div class="img-content">'+r+'<div class="notdrop"><\/div><\/div>';n++}e+=t}$("#TemplateFormMain").show();$("#btnSetImage").attr("disabled",!0)}else $("#TemplateFormMain").hide(),$("#btnSetImage").attr("disabled",!1);document.getElementById(t).innerHTML=e}DragDropEvent_Item_Img()}function LoadImgByForm(n){CurrentFolderName_Customer!=""&&AjaxLoad(url="/Customer/CustomerImage/?handler=LoadImgByForm",data={FolderID:n},async=!0,error=function(){notiError_SW()},success=function(n){DataTemplateList=JSON.parse(n);let t=DataTemplateList[0];t!=undefined?(TemplateID=t.TemplateID,t.DataTemplate&&(DataTemplate=JSON.parse(t.DataTemplate)),LoadTemplateForm(),RenderImgByForm(DataTemplate,"templateForm"),EventImageInFormGalerryClick()):($("#btnSetImage").attr("disabled",!1),$("#TemplateFormMain").hide(),$("#templateForm").empty())})}function DragDropEvent_Item_Img(){$(".design_img_item").draggable({scroll:!1,containment:"#seg_image",helper:"clone",disable:!1,start:function(){},drag:function(){},stop:function(){}});$(".selectdrop").droppable({accept:".design_img_item","class":{"ui-droppable-active":"ac","ui-droppable-hover":"hv"},acivate:function(){},over:function(){},out:function(){},drop:function(n,t){let i=t.helper.attr("data-id"),r=$(this).attr("data-x"),u=$(this).attr("data-y");Add_Item_Image(i,r,u)},deactivate:function(){}})}function Add_Item_Image(n,t,i){var r,u;if(DataTemplate){let f=0;for(r=0;r<DataTemplate.rows;r++)for(u=0;u<DataTemplate.columns;u++){let r=DataTemplate.data[f].content;r.x==t&&r.y==i&&(r.img=n);f++}ExecuteImgForm()}}function Img_Noti_Success_Save(){let n=document.getElementById("img_noti_success");n.classList.remove("show");void n.offsetWidth;n.classList.add("show")}function Img_Noti_Failure_Save(){let n=document.getElementById("img_noti_success");n.classList.remove("show");void n.offsetWidth;n.classList.add("show")}function ExecuteImgForm(){CurrentFolderID_Customer!=""&&DataTemplate!=undefined&&AjaxLoad(url="/Customer/CustomerImage/?handler=InsertImgForm",data={folderid:CurrentFolderID_Customer,templateid:TemplateID,data:JSON.stringify(DataTemplate)},async=!0,error=function(){notiError_SW()},success=function(){resul=="1"?(Img_Noti_Success_Save(),ReloadImgTemplateList(),RenderImgByForm(DataTemplate,"templateForm")):Img_Noti_Failure_Save()})}function ReloadImgTemplateList(){if(CurrentFolderID_Customer!=""&&DataTemplate!=undefined&&DataTemplateList.length)for(let n=0;n<DataTemplateList.length;n++)DataTemplateList[n].TemplateID==TemplateID&&(DataTemplateList[n].DataTemplate=JSON.stringify(DataTemplate))}function EventImageInFormGalerryClick(){var n=$("#templateForm");n.on("onAfterOpen.lg",function(){try{_dim_galery_3=document.getElementsByClassName("lg-backdrop")[0];_dim_galery_4=document.getElementsByClassName("lg")[0];_dim_galery_3.style.display="none";_dim_galery_4.style.display="none";setTimeout(function(){CurrentEditImageForm==0&&(_dim_galery_3.style.display="block",_dim_galery_4.style.display="block")},300)}catch(n){}});$("#templateForm").on("click",".button-delete-img-form",function(n){CurrentEditImageForm=1;Remove_Item_Image($(this).attr("data-x"),$(this).attr("data-y"));n.stopImmediatePropagation()})}function Remove_Item_Image(n,t){var i,r;if(DataTemplate){let u=0;for(i=0;i<DataTemplate.rows;i++)for(r=0;r<DataTemplate.columns;r++){let i=DataTemplate.data[u].content;i.x==n&&i.y==t&&(i.img="");u++}ExecuteImgForm()}}var xhrRequest_Image,xhrRequest_File,dataImageCustomer,dataFileCustomer=[],CurrentEditDescriptionImage=0,_dim_galery_1,_dim_galery_2,_dim_galery_3,_dim_galery_4,CurrentEditImageForm=0,dataImageForm,DataTemplateList=[],DataTemplate=[],TemplateID=0;$("#list-button_sort").on("click",".btn-sort",function(){$(this).addClass("active").siblings().removeClass("active")});