(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?exports.watermark=t():n.watermark=t()})(window,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((i&1&&(n=t(n)),i&8)||i&4&&typeof n=="object"&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),i&2&&typeof n!="string")for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(n,t,i){n.exports=i(1).default},function(n,t,i){"use strict";function k(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return function(n){return i.reduce(function(n,t){return t.call(null,n)},n)}}function d(n){return n}function s(n){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s(n)}function g(n,t,i){n.onload=function(){return i(n)};n.src=t}function nt(n){var t=s(n);return t==="string"?tt:n instanceof Image?d:it}function c(n,t){for(var r=[],i=0;i<n.length;i++){var u=n[i],f=nt(u),e=f(u,t);r.push(e)}return Promise.all(r)}function tt(n,t){var i=new Image;return typeof t=="function"&&t(i),new Promise(function(t){i.onload=function(){return t(i)};i.src=n})}function it(n){var t=new FileReader;return new Promise(function(i){var r=new Image;t.onloadend=function(){return g(r,t.result,i)};t.readAsDataURL(n)})}function rt(n,t){var i=new Image;return typeof t=="function"&&(i.onload=t),i.src=n,i}function ut(n,t){var i=t.getContext("2d");return t.width=n.width,t.height=n.height,i.drawImage(n,0,0),t}function ft(n,t){var i=t.pop();return ut(n,i)}function et(n,t){return n.map(function(n){return ft(n,t)})}function ot(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{type:"image/png",encoderOptions:.92};return n.toDataURL(t.type,t.encoderOptions)}function st(n){return l.exec(n).slice(1)}function ht(n){return window.atob(n)}function ct(n){for(var i=n.length,r=new Uint8Array(i),t=0;t<i;t++)r[t]=n.charCodeAt(t);return r}function e(n,t,i){return i||(i=1),function(r,u){var f=r.getContext("2d");return f.save(),f.globalAlpha=i,f.drawImage(u,n(r,u),t(r,u)),f.restore(),r}}function lt(n){return e(function(n,t){return n.width-(t.width+10)},function(n,t){return n.height-(t.height+10)},n)}function at(n){return e(function(n,t){return n.width-(t.width+10)},function(){return 10},n)}function vt(n){return e(function(){return 10},function(n,t){return n.height-(t.height+10)},n)}function yt(n){return e(function(){return 10},function(){return 10},n)}function pt(n){return e(function(n,t){return(n.width-t.width)/2},function(n,t){return(n.height-t.height)/2},n)}function o(n,t,i,r,u,f){return f||(f=1),function(e){var o=e.getContext("2d"),s;return o.save(),o.globalAlpha=f,o.fillStyle=u,o.font=r,s=o.measureText(i),o.fillText(i,n(e,s,o),t(e,s,o)),o.restore(),e}}function wt(n,t,i,r,u){return o(function(n,t){return n.width-(t.width+10)},function(n){return u||n.height-10},n,t,i,r)}function bt(n,t,i,r,u){return o(function(){return 10},function(n){return u||n.height-10},n,t,i,r)}function kt(n,t,i,r,u){return o(function(n,t){return n.width-(t.width+10)},function(){return u||20},n,t,i,r)}function dt(n,t,i,r,u){return o(function(){return 10},function(){return u||20},n,t,i,r)}function gt(n,t,i,r){return o(function(n,t,i){return i.textAlign="center",n.width/2},function(n,t,i){return i.textBaseline="middle",n.height/2},n,t,i,r)}function ni(n,t){var i=n.apply(null,t);return{canvas:i,sources:t}}function p(n,t){var i=Object.keys(t);return i.forEach(function(i){return n[i]=t[i]}),n}function ti(n){return p({},n)}function ii(){var n=[];return{pop:function(){return this.length===0&&n.push(document.createElement("canvas")),n.pop()},get length(){return n.length},release:function(t){var i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);n.push(t)},clear:function(){n.splice(0,n.length)},get elements(){return n}}}function ri(n){return p(ti(b),n)}function ui(n,t,i){var r=n.canvas,u=n.sources,f=ot(r,i);return u.forEach(t.release),f}function f(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,t=ri(r);return i||(i=c(n,t.init)),{dataUrl:function(i){var r=this.then(function(n){return et(n,h)}).then(function(n){return ni(i,n)}).then(function(n){return ui(n,h,{type:t.type,encoderOptions:t.encoderOptions})});return f(n,t,r)},load:function(n,i){var r=this.then(function(t){return c([t].concat(n),i)});return f(n,t,r)},render:function(){var i=this.then(function(n){return c([n])});return f(n,t,i)},blob:function(i){var r=this.dataUrl(i).then(a);return f(n,t,r)},image:function(i){var r=this.dataUrl(i).then(rt);return f(n,t,r)},then:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return i.then.apply(i,r)}}}var r,u,l,a,v,y,w,h,b;i.r(t);r={};i.r(r);i.d(r,"atPos",function(){return e});i.d(r,"lowerRight",function(){return lt});i.d(r,"upperRight",function(){return at});i.d(r,"lowerLeft",function(){return vt});i.d(r,"upperLeft",function(){return yt});i.d(r,"center",function(){return pt});u={};i.r(u);i.d(u,"atPos",function(){return o});i.d(u,"lowerRight",function(){return wt});i.d(u,"lowerLeft",function(){return bt});i.d(u,"upperRight",function(){return kt});i.d(u,"upperLeft",function(){return dt});i.d(u,"center",function(){return gt});l=/^data:([^;]+);base64,(.*)$/;a=k(st,function(n){return[ht(n[1]),n[0]]},function(n){return new Blob([ct(n[0])],{type:n[1]})});v=r;y=u;w=ii();h=w;i.d(t,"default",function(){return f});b={init:function(){},type:"image/png",encoderOptions:.92};f.image=v;f.text=y;f.destroy=function(){return h.clear()}}])});